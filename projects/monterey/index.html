<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monterey Bay</title>
    <meta name="project-title" content="Monterey Bay">
    <link rel="stylesheet" href="../../resources/styles/footer.css">
    <link rel="stylesheet" href="../../resources/styles/headnav.css">
    <link rel="stylesheet" href="../../resources/styles/infobox.css">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        #map {
            width: 100%;
            height: 100vh;
        }        
    </style>
</head>
<body class="subpage">
    <div class="header" id="header">
        <div id="header-atmosphere"></div>
        <div class="star-background"></div>
        <div class="header-content">
            <h1>Map Portfolio</h1>
            <p>Ian Maher</p>
        </div>
    </div>
    <div class="nav-bar">
        <a href="../../index.html">
            <button class="nav-button" id="globe-button">
                <i class="fa fa-globe" style="font-size:36px;color:white"></i>
                <span class="text">Globe</span>
            </button>
        </a>

        <button class="nav-button projects-button" id="projects-button">
            <i class="fa fa-map" style="font-size:36px;color:white"></i>
            <span class="text">Project Pages</span>
        </button>

        <button class="nav-button">
            <i class="fa fa-address-card" style="font-size:36px;color:white"></i>
            <span class="text">About Me</span>
        </button>
          
    </div>
    <div class="info-box" id="infoBox">
        <h2>Potential Dive Sites in the Monterey Bay Area</h2>
        <p>
            <b>Skills used:</b>
            <span id="skillsContainer"></span>
        </p>
        <p>I created this map as part of a final project for my Geospatial Analysis course. I chose this topic because of my own personal interest in scuba diving, as well as a connection with the region. Some of the first maps I became aware of were my uncle's maps of the bathymetry of the Monterey Bay. After determining suitable parameters, including the correct depth, distance from shore, and attractive features, used several datasets to determine the most promising sites to dive in the region. I looked at species diversity in the region by using vector layers supplied by the California Department of Fish & Wildlife, as well as layers detailing local kelp concentrations. I also looked at ocean depth using NOAA's global bathymetric DEM layer. Finally, I used a sand deposit layer from the USGS to find sites that were accessible from the shore. A full sized, undistorted version of the map <a href="../../resources/pictures/monterey.jpg" target="_blank">can be found here</a></p>
    </div>
    <button class="info-button" id="infoButton">
        <i class="fa fa-info-circle" style="font-size:24px;"></i>
    </button>
    <div id="map"></div>

    <div id="projects-modal" class="projects-modal">
        <div class="projects-modal-content">
            <button class="projects-modal-close" id="close-projects">&times;</button>
            <div class="projects-grid"></div>
        </div>
    </div>

    <div id="footer"></div>
    
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiaWZvcm1haGVyIiwiYSI6ImNsaHBjcnAwNDF0OGkzbnBzZmUxM2Q2bXgifQ.fIyIgSwq1WWVk9CKlXRXiQ';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/satellite-v9',
            zoom: 1,
            bounds: [[-122.32, 36.4], [-121.77, 37.1]],
            projection: 'mercator',
        });
        map.on('load', () => {
            map.addSource('monterey-map', {
                'type': 'image',
                'url': '../../resources/pictures/monterey.jpg',
                'coordinates': [
                    [-122.32, 37], // Top-left
                    [-121.77, 37], // Top-right
                    [-121.81, 36.42],  // Bottom-left
                    [-122.32, 36.42] // Bottom-right
                ]
            });
            map.addLayer({
                'id': 'monterey-map',
                'type': 'raster',
                'source': 'monterey-map',
                'paint': {
                    'raster-opacity': 0
                }
            });
            let opacity = 0;
            function fadeIn() {
                opacity += 0.05;
                if (opacity <= 1) {
                    map.setPaintProperty('monterey-map', 'raster-opacity', opacity);
                    requestAnimationFrame(fadeIn);
                }
            }
            fadeIn();

            map.on('click', (e) => {
            const lat = e.lngLat.lat;
            const lng = e.lngLat.lng;
            
            console.log(`Latitude: ${lat}, Longitude: ${lng}`);

            });
        });
    </script>

    <script src="../../resources/scripts/projects-script.js"></script>
    <script src="../../resources/scripts/nav-bar.js"></script>
    <script src="../../resources/scripts/footer.js"></script>
    <script src="../../resources/scripts/stars.js"></script>
</body>
</html>
